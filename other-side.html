<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Other Side of Me - Sandhosh</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --accent-color: #c778dd;
            --text-white: #ffffff;
            --line-color: #abb2bf;
            --bg-dark: #282c34;
        }

        body {
            font-family: "Fira Code", monospace, sans-serif;
            background-color: var(--bg-dark);
            background-image: radial-gradient(2px 2px at 20px 30px, #eee, rgba(0,0,0,0));
            background-repeat: repeat;
            background-size: 200px 200px;
            background-position: 0 0, 40px 60px;
            overflow-x: hidden;
            position: relative;
        }

        /* Password gate overlay */
        .auth-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.75);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            backdrop-filter: blur(2px);
        }
        .auth-box {
            background: var(--bg-dark);
            color: var(--text-white);
            border: 1px solid var(--line-color);
            border-radius: 12px;
            width: min(420px, 92vw);
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6);
        }
        .auth-box h2 { font-size: 20px; margin-bottom: 8px; }
        .auth-box p { color: var(--line-color); font-size: 14px; margin-bottom: 12px; }
        .auth-box input {
            width: 100%;
            background: #1f2329;
            color: var(--text-white);
            border: 1px solid var(--line-color);
            border-radius: 8px;
            padding: 10px 12px;
        }
        .auth-error { color: #e06c75; font-size: 12px; margin-top: 8px; }
        body.locked { overflow: hidden; }
        body.locked .auth-overlay { display: flex; }

        .back-home {
            position: fixed;
            top: 30px;
            left: 30px;
            background-color: var(--accent-color);
            color: var(--text-white);
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 5px;
            font-size: 14px;
            transition: all 0.3s ease;
            z-index: 1000;
            border: 2px solid var(--accent-color);
        }

        .back-home:hover {
            background-color: transparent;
            transform: translateX(-5px);
        }

        .report-button {
            position: absolute;
            top: 30px;
            right: 30px;
            background-color: var(--accent-color);
            color: var(--text-white);
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 5px;
            font-size: 14px;
            transition: all 0.3s ease;
            z-index: 1000;
            border: 2px solid var(--accent-color);
        }

        .report-button:hover {
            background-color: transparent;
            transform: translateX(5px);
        }

        .short-report-button {
            position: absolute;
            top: 80px;
            right: 30px;
            background-color: var(--accent-color);
            color: var(--text-white);
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 5px;
            font-size: 14px;
            transition: all 0.3s ease;
            z-index: 1000;
            border: 2px solid var(--accent-color);
        }

        .short-report-button:hover {
            background-color: transparent;
            transform: translateX(5px);
        }

        /* Report Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--bg-dark);
            color: var(--text-white);
            border: 1px solid var(--line-color);
            border-radius: 10px;
            width: min(900px, 92vw);
            max-height: 90vh;
            overflow: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.6);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid var(--line-color);
        }

        .modal-header h2 {
            font-size: 20px;
            color: var(--text-white);
        }

        .close-modal {
            background: transparent;
            border: 2px solid var(--line-color);
            color: var(--text-white);
            border-radius: 6px;
            padding: 6px 12px;
            cursor: pointer;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-controls {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }

        .modal-controls label {
            color: var(--line-color);
            font-size: 14px;
        }

        .modal-controls select {
            background: #1f2329;
            color: var(--text-white);
            border: 1px solid var(--line-color);
            border-radius: 6px;
            padding: 8px 10px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 16px;
        }

        .calendar-grid .day-name {
            color: var(--line-color);
            font-size: 12px;
            text-align: center;
        }

        .calendar-cell {
            border: 1px dashed var(--line-color);
            border-radius: 8px;
            min-height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .calendar-cell button {
            width: 100%;
            height: 100%;
            background: transparent;
            color: var(--text-white);
            border: none;
            cursor: pointer;
            padding: 6px;
            transition: background 0.2s ease, transform 0.1s ease;
        }

        .calendar-cell button:hover {
            background: rgba(199, 120, 221, 0.15);
        }

        .calendar-cell.has-entry {
            border-color: var(--accent-color);
        }

        .calendar-cell.selected {
            background: rgba(199, 120, 221, 0.1);
            border-color: var(--accent-color);
        }

        .report-form {
            margin-top: 20px;
            border-top: 1px solid var(--line-color);
            padding-top: 16px;
        }

        .report-form h3 {
            color: var(--accent-color);
            margin-bottom: 8px;
            font-size: 18px;
        }

        .report-form textarea {
            width: 100%;
            background: #1f2329;
            color: var(--text-white);
            border: 1px solid var(--line-color);
            border-radius: 8px;
            padding: 12px;
            resize: vertical;
        }

        .report-form input[type="text"] {
            width: 100%;
            background: #1f2329;
            color: var(--text-white);
            border: 1px solid var(--line-color);
            border-radius: 8px;
            padding: 10px 12px;
            margin-bottom: 10px;
        }

        .form-actions {
            display: flex;
            gap: 12px;
            margin-top: 12px;
        }

        .form-actions button {
            background: var(--accent-color);
            color: var(--text-white);
            border: 2px solid var(--accent-color);
            border-radius: 6px;
            padding: 10px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .form-actions button:hover {
            background: transparent;
        }

        .form-actions .secondary {
            background: transparent;
            border-color: var(--line-color);
        }

        .status-options {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .status-btn {
            background: #1f2329;
            color: var(--text-white);
            border: 2px solid var(--line-color);
            border-radius: 6px;
            padding: 8px 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .status-btn:hover {
            border-color: var(--accent-color);
        }

        .status-btn.active {
            background: var(--accent-color);
            border-color: var(--accent-color);
        }

        .calendar-cell .status-badge {
            font-size: 9px;
            padding: 2px 4px;
            border-radius: 3px;
            margin-top: 2px;
            text-align: center;
        }

        .badge-present { background: #98c379; color: #000; }
        .badge-leave { background: #e06c75; color: #fff; }
        .badge-halfday { background: #e5c07b; color: #000; }
        .badge-wfh { background: #61afef; color: #fff; }
        .badge-holiday { background: #c778dd; color: #fff; }

        /* Header Section */
        .other-header {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
        }

        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        .header-content {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 40px;
        }

        .header-content h1 {
            color: var(--text-white);
            font-size: 64px;
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeInUp 1s ease forwards;
        }

        .header-content h1 span {
            color: var(--accent-color);
            display: inline-block;
            animation: glow 2s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(199, 120, 221, 0.5); }
            50% { text-shadow: 0 0 40px rgba(199, 120, 221, 0.8), 0 0 60px rgba(199, 120, 221, 0.6); }
        }

        .header-content p {
            color: var(--line-color);
            font-size: 20px;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.8;
            opacity: 0;
            animation: fadeInUp 1s ease 0.3s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
            from {
                opacity: 0;
                transform: translateY(30px);
            }
        }















        /* Content Sections */
        .content-section {
            min-height: 100vh;
            padding: 80px 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .section-container {
            max-width: 1200px;
            width: 100%;
            position: relative;
            z-index: 10;
        }

        .section-title {
            font-size: 48px;
            color: var(--text-white);
            margin-bottom: 20px;
            text-align: center;
        }

        .section-title span {
            color: var(--accent-color);
            border-bottom: 3px solid var(--accent-color);
        }

        .section-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }

        .content-card {
            background: rgba(40, 44, 52, 0.9);
            border: 1px solid var(--line-color);
            border-radius: 12px;
            padding: 30px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .content-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-color), transparent);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }

        .content-card:hover::before {
            transform: scaleX(1);
        }

        .content-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent-color);
            box-shadow: 0 10px 30px rgba(199, 120, 221, 0.3);
        }

        .card-icon {
            font-size: 48px;
            margin-bottom: 20px;
            display: block;
        }

        .card-title {
            font-size: 24px;
            color: var(--text-white);
            margin-bottom: 15px;
        }

        .card-description {
            color: var(--line-color);
            line-height: 1.8;
            font-size: 15px;
        }

        .section-bg {
            position: absolute;
            inset: 0;
            opacity: 1;
            background-size: cover;
            background-position: center;
            pointer-events: none;
        }

        @media (max-width: 968px) {
            .header-content h1 {
                font-size: 40px;
            }

            .section-title {
                font-size: 32px;
            }

            .content-section {
                padding: 60px 20px;
            }

            .back-home {
                top: 15px;
                left: 15px;
                padding: 10px 20px;
                font-size: 12px;
            }

            .report-button {
                top: 15px;
                right: 15px;
                padding: 10px 20px;
                font-size: 12px;
            }

            .short-report-button {
                top: 60px;
                right: 15px;
                padding: 8px 16px;
                font-size: 11px;
            }
        }
    </style>
</head>
<body class="locked">
    <!-- Password Gate UI -->
    <div id="authModal" class="auth-overlay" aria-hidden="false">
        <div class="auth-box" role="dialog" aria-labelledby="authTitle">
            <h2 id="authTitle">Enter Password</h2>
            <p>Access to this page is protected.</p>
            <input id="authInput" type="password" placeholder="Password" autocomplete="current-password" />
            <div class="form-actions" style="margin-top: 12px;">
                <button id="authSubmit">Unlock</button>
            </div>
            <div id="authError" class="auth-error" style="display:none;">Incorrect password. Try again.</div>
        </div>
    </div>
    <script>
        (function () {
            const PASS = 'ant02';
            const input = document.getElementById('authInput');
            const submit = document.getElementById('authSubmit');
            const err = document.getElementById('authError');
            try {
                const cached = sessionStorage.getItem('os_pass');
                if (cached === PASS) {
                    document.body.classList.remove('locked');
                    return;
                }
            } catch (_) {}

            function tryUnlock() {
                if (input.value === PASS) {
                    try { sessionStorage.setItem('os_pass', PASS); } catch (_) {}
                    document.body.classList.remove('locked');
                    err.style.display = 'none';
                } else {
                    err.style.display = 'block';
                    input.select();
                }
            }

            submit.addEventListener('click', tryUnlock);
            input.addEventListener('keydown', (e) => { if (e.key === 'Enter') tryUnlock(); });
            setTimeout(() => input && input.focus(), 0);
        })();
    </script>
    <a href="index.html" class="back-home">← Back to Portfolio</a>
    <a href="#" class="report-button">Report</a>
    <a href="#" class="short-report-button">Short Report</a>

    <!-- Report Modal -->
    <div id="reportModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Daily Report</h2>
                <button class="close-modal" aria-label="Close">×</button>
            </div>
            <div class="modal-body">
                <div class="modal-controls">
                    <label>Month
                        <select id="reportMonth" aria-label="Select month"></select>
                    </label>
                    <label>Year
                        <select id="reportYear" aria-label="Select year"></select>
                    </label>
                </div>
                <div class="calendar-grid" id="calendar" aria-label="Calendar"></div>
                <div class="report-form" id="reportForm" style="display:none;">
                    <h3 id="selectedDateLabel">Report for </h3>
                    <label for="reportTitle" style="color: var(--line-color);">PDF Heading</label>
                    <input id="reportTitle" type="text" placeholder="e.g., Internship Vinsights solution" />
                    <label for="reportText" style="color: var(--line-color);">Today's Tasks</label>
                    <textarea id="reportText" rows="8" placeholder="Write what you did today..."></textarea>
                    <div class="form-actions">
                        <button id="saveReport">Save</button>
                        <button id="exportPdf">Export PDF</button>
                        <button id="exportAllPdf" class="secondary">Export All Days PDF</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Short Report Modal -->
    <div id="shortReportModal" class="modal" aria-hidden="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Short Report (Attendance)</h2>
                <button class="close-short-modal" aria-label="Close">×</button>
            </div>
            <div class="modal-body">
                <div class="modal-controls">
                    <label>Month
                        <select id="shortMonth" aria-label="Select month"></select>
                    </label>
                    <label>Year
                        <select id="shortYear" aria-label="Select year"></select>
                    </label>
                    <button id="exportShortPdf" style="background: var(--accent-color); color: var(--text-white); border: 2px solid var(--accent-color); border-radius: 6px; padding: 8px 16px; cursor: pointer;">Export Calendar PDF</button>
                </div>
                <div class="calendar-grid" id="shortCalendar" aria-label="Short Report Calendar"></div>
                <div class="report-form" id="shortForm" style="display:none;">
                    <h3 id="shortDateLabel">Status for </h3>
                    <label style="color: var(--line-color);">Select Status</label>
                    <div class="status-options">
                        <button class="status-btn" data-status="Present">Present</button>
                        <button class="status-btn" data-status="Leave">Leave</button>
                        <button class="status-btn" data-status="Half Day">Half Day</button>
                        <button class="status-btn" data-status="WFH">Work From Home</button>
                        <button class="status-btn" data-status="Government Holiday">Government Holiday</button>
                    </div>
                    <label for="shortNotes" style="color: var(--line-color); margin-top: 12px; display: block;">2 Words / Notes</label>
                    <input id="shortNotes" type="text" placeholder="e.g., Good work, Meeting done" style="width: 100%; background: #1f2329; color: var(--text-white); border: 1px solid var(--line-color); border-radius: 6px; padding: 8px 10px; margin-bottom: 12px;" />
                    <div class="form-actions" style="margin-top: 16px;">
                        <button id="saveShortReport">Save</button>
                        <button id="clearShortReport" class="secondary">Clear</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Header Section -->
    <section class="other-header">
        <div class="stars" id="stars"></div>
        <div class="header-content">
            <h1>The <span>Other Side</span> of Me</h1>
            <p>Beyond code and algorithms, there's a universe of passions that drive my curiosity. 
               Here's what fuels my imagination when I'm not building tech solutions.</p>
        </div>
    </section>

    <!-- Space Section -->
    <section class="content-section" ">
        <div class="section-bg" style="background-image: url('other-side/space.png');"></div>
        <div class="section-container">
            <h2 class="section-title"><span>Space</span> & Universe</h2>
            <div class="section-content">
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Cosmic Wonders</h3>
                    <p class="card-description">
                        Fascinated by the mysteries of black holes, neutron stars, and the vast expanse of the cosmos. 
                        Every documentary about space exploration ignites my sense of wonder about our place in the universe.
                    </p>
                </div>
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Space Exploration</h3>
                    <p class="card-description">
                        Following missions from SpaceX, NASA, and ISRO closely. The idea of humanity becoming a multi-planetary 
                        species is not just science fiction anymore—it's the future we're building.
                    </p>
                </div>
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Stargazing</h3>
                    <p class="card-description">
                        There's something humbling about looking up at the night sky and realizing how small we are. 
                        Spotting constellations and planets reminds me that there's always more to discover.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Books Section -->
    <section class="content-section" style="background: linear-gradient(135deg, #2d1b00 0%, #1a0f00 100%);">
        <div class="section-bg" style="background-image: url('https://images.unsplash.com/photo-1507842217343-583bb7270b66?w=1600');"></div>
        <div class="section-container">
            <h2 class="section-title"><span>Books</span> & Reading</h2>
            <div class="section-content">
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Sci-Fi & Fantasy</h3>
                    <p class="card-description">
                        Lost in worlds created by Asimov, Clarke, and Tolkien. Science fiction teaches us to imagine 
                        impossible futures, while fantasy reminds us of the power of storytelling and mythmaking.
                    </p>
                </div>
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Philosophy & Psychology</h3>
                    <p class="card-description">
                        Exploring the human mind through works on cognitive science, philosophy, and psychology. 
                        Understanding how we think helps me build better solutions and connect with people.
                    </p>
                </div>
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Technology & Innovation</h3>
                    <p class="card-description">
                        Staying updated with books on AI, blockchain, and emerging technologies. Reading about innovation 
                        fuels my own creative process and keeps me ahead in the tech landscape.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Anime Section -->
    <section class="content-section" style="background: linear-gradient(135deg, #1a0033 0%, #0d001a 100%);">
        <div class="section-bg" style="background-image: url('https://images.unsplash.com/photo-1578632767115-351597cf2477?w=1600');"></div>
        <div class="section-container">
            <h2 class="section-title"><span>Anime</span> & Manga</h2>
            <div class="section-content">
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Epic Storytelling</h3>
                    <p class="card-description">
                        From Attack on Titan to Fullmetal Alchemist, anime shows complex narratives, deep character 
                        development, and philosophical themes that rival any literary masterpiece.
                    </p>
                </div>
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Art & Animation</h3>
                    <p class="card-description">
                        Appreciating the incredible artistry in anime—from Studio Ghibli's breathtaking landscapes to 
                        the fluid action sequences in modern battle shounen. Every frame is a work of art.
                    </p>
                </div>
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Life Lessons</h3>
                    <p class="card-description">
                        Anime teaches resilience, friendship, and determination. Stories about never giving up and 
                        protecting what matters most resonate deeply and inspire me in my own journey.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Cricket Section -->
    <section class="content-section" style="background: linear-gradient(135deg, #001a00 0%, #000d00 100%);">
        <div class="section-bg" style="background-image: url('https://images.unsplash.com/photo-1540747913346-19e32dc3e97e?w=1600');"></div>
        <div class="section-container">
            <h2 class="section-title"><span>Cricket</span> Passion</h2>
            <div class="section-content">
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">The Gentleman's Game</h3>
                    <p class="card-description">
                        Cricket isn't just a sport—it's a test of patience, strategy, and mental strength. Whether it's 
                        Test cricket's slow burn or T20's explosive action, every format has its own charm.
                    </p>
                </div>
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Team India</h3>
                    <p class="card-description">
                        Following the Indian cricket team through victories and defeats. The passion, the nail-biting 
                        finishes, and the moments of pure brilliance make it more than just a game.
                    </p>
                </div>
                <div class="content-card">
                    <span class="card-icon"></span>
                    <h3 class="card-title">Stats & Strategy</h3>
                    <p class="card-description">
                        Analyzing player statistics, match strategies, and team compositions. Cricket analytics combines 
                        my love for numbers with the excitement of the sport.
                    </p>
                </div>
            </div>
        </div>
    </section>


    <!-- jsPDF for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous"></script>
    <script>
        // Generate stars
        const starsContainer = document.getElementById('stars');
        for (let i = 0; i < 200; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }
        // Report Modal + Calendar + PDF
        (function() {
            const reportBtn = document.querySelector('.report-button');
            const modal = document.getElementById('reportModal');
            const closeBtn = modal.querySelector('.close-modal');
            const monthSelect = document.getElementById('reportMonth');
            const yearSelect = document.getElementById('reportYear');
            const calendarEl = document.getElementById('calendar');
            const formEl = document.getElementById('reportForm');
            const dateLabel = document.getElementById('selectedDateLabel');
            const textArea = document.getElementById('reportText');
            const titleInput = document.getElementById('reportTitle');
            const saveBtn = document.getElementById('saveReport');
            const exportBtn = document.getElementById('exportPdf');
            const exportAllBtn = document.getElementById('exportAllPdf');

            const MONTHS = ['January','February','March','April','May','June','July','August','September','October','November','December'];
            const DAYS = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
            const now = new Date();
            let selectedYear = now.getFullYear();
            let selectedMonth = now.getMonth();
            let selectedDateKey = null;

            function getReports() {
                try {
                    const raw = localStorage.getItem('dailyReports');
                    return raw ? JSON.parse(raw) : {};
                } catch (e) {
                    return {};
                }
            }

            function saveReports(data) {
                localStorage.setItem('dailyReports', JSON.stringify(data));
            }

            function pad(n) { return String(n).padStart(2, '0'); }
            function dateKeyFromParts(y, m, d) {
                return `${y}-${pad(m+1)}-${pad(d)}`;
            }

            function populateSelectors() {
                monthSelect.innerHTML = MONTHS.map((m, i) => `<option value="${i}">${m}</option>`).join('');
                monthSelect.value = String(selectedMonth);
                const rangeStart = selectedYear - 5;
                const rangeEnd = selectedYear + 5;
                yearSelect.innerHTML = Array.from({length: rangeEnd - rangeStart + 1}, (_, i) => {
                    const y = rangeStart + i;
                    return `<option value="${y}">${y}</option>`;
                }).join('');
                yearSelect.value = String(selectedYear);
            }

            function renderCalendar(year, month) {
                const reports = getReports();
                calendarEl.innerHTML = '';
                // Day names header
                for (const d of DAYS) {
                    const dn = document.createElement('div');
                    dn.className = 'day-name';
                    dn.textContent = d;
                    calendarEl.appendChild(dn);
                }
                const firstDayIdx = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                // Leading blanks
                for (let i = 0; i < firstDayIdx; i++) {
                    const cell = document.createElement('div');
                    cell.className = 'calendar-cell';
                    calendarEl.appendChild(cell);
                }
                // Days
                for (let day = 1; day <= daysInMonth; day++) {
                    const key = dateKeyFromParts(year, month, day);
                    const cell = document.createElement('div');
                    cell.className = 'calendar-cell' + (reports[key] ? ' has-entry' : '');
                    const btn = document.createElement('button');
                    btn.type = 'button';
                    btn.textContent = String(day);
                    btn.dataset.key = key;
                    btn.addEventListener('click', () => selectDate(year, month, day));
                    cell.appendChild(btn);
                    calendarEl.appendChild(cell);
                }
            }

            function selectDate(year, month, day) {
                selectedYear = year;
                selectedMonth = month;
                selectedDateKey = dateKeyFromParts(year, month, day);
                const reports = getReports();
                dateLabel.textContent = `Report for ${selectedDateKey}`;
                textArea.value = reports[selectedDateKey]?.text || '';
                titleInput.value = reports[selectedDateKey]?.title || '';
                formEl.style.display = 'block';
                // Highlight selected cell
                const cells = calendarEl.querySelectorAll('.calendar-cell');
                cells.forEach(c => c.classList.remove('selected'));
                const btn = calendarEl.querySelector(`button[data-key="${selectedDateKey}"]`);
                if (btn && btn.parentElement) btn.parentElement.classList.add('selected');
            }

            // Save current selected date report
            saveBtn.addEventListener('click', () => {
                if (!selectedDateKey) return alert('Select a date first');
                const reports = getReports();
                reports[selectedDateKey] = {
                    text: textArea.value.trim(),
                    title: titleInput.value.trim(),
                    updatedAt: new Date().toISOString()
                };
                saveReports(reports);
                renderCalendar(selectedYear, selectedMonth);
                alert('Report saved');
            });

            // Export current selected day to PDF
            exportBtn.addEventListener('click', () => {
                if (!selectedDateKey) return alert('Select a date first');
                const reports = getReports();
                const entry = reports[selectedDateKey];
                const { jsPDF } = window.jspdf || {};
                if (!jsPDF) return alert('PDF library not loaded yet');
                const doc = new jsPDF();
                const heading = (entry?.title && entry.title.length) ? entry.title : 'Daily Report';
                
                // Draw page border
                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                doc.setDrawColor(0, 0, 0);
                doc.setLineWidth(0.5);
                doc.rect(5, 5, pageWidth - 10, pageHeight - 10);
                
                // Draw double border box with dark blue heading centered
                const boxX = 14;
                const boxY = 14;
                const boxWidth = pageWidth - 28;
                const boxHeight = 24;
                
                // Outer border
                doc.setDrawColor(0, 51, 102); // Dark blue
                doc.setLineWidth(0.8);
                doc.rect(boxX, boxY, boxWidth, boxHeight);
                
                // Inner border (2mm inside)
                doc.rect(boxX + 2, boxY + 2, boxWidth - 4, boxHeight - 4);
                
                // Centered dark blue heading
                doc.setTextColor(0, 51, 102); // Dark blue
                doc.setFont('helvetica', 'bold');
                doc.setFontSize(18);
                const textWidth = doc.getTextWidth(heading);
                const centerX = pageWidth / 2 - textWidth / 2;
                doc.text(heading, centerX, boxY + 15);
                
                // Reset to black for rest of content
                doc.setTextColor(0, 0, 0);
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(12);
                doc.text(`Date: ${selectedDateKey}`, 14, 46);
                doc.setFontSize(12);
                const text = entry?.text ? entry.text : '(No entry)';
                const lines = doc.splitTextToSize(text, 180);
                doc.text(lines, 14, 56);
                const sanitizedHeading = heading.replace(/[^a-zA-Z0-9]/g, '_');
                doc.save(`${selectedDateKey}_${sanitizedHeading}.pdf`);
            });

            // Export all saved reports into one PDF
            exportAllBtn.addEventListener('click', () => {
                const reports = getReports();
                const keys = Object.keys(reports).sort();
                const { jsPDF } = window.jspdf || {};
                if (!jsPDF) return alert('PDF library not loaded yet');
                if (keys.length === 0) return alert('No saved reports');
                const doc = new jsPDF();
                keys.forEach((k, idx) => {
                    if (idx > 0) doc.addPage();
                    const entry = reports[k];
                    const heading = (entry?.title && entry.title.length) ? entry.title : 'Daily Report';
                    
                    // Draw page border
                    const pageWidth = doc.internal.pageSize.getWidth();
                    const pageHeight = doc.internal.pageSize.getHeight();
                    doc.setDrawColor(0, 0, 0);
                    doc.setLineWidth(0.5);
                    doc.rect(5, 5, pageWidth - 10, pageHeight - 10);
                    
                    // Draw double border box with dark blue heading centered
                    const boxX = 14;
                    const boxY = 14;
                    const boxWidth = pageWidth - 28;
                    const boxHeight = 24;
                    
                    // Outer border
                    doc.setDrawColor(0, 51, 102); // Dark blue
                    doc.setLineWidth(0.8);
                    doc.rect(boxX, boxY, boxWidth, boxHeight);
                    
                    // Inner border (2mm inside)
                    doc.rect(boxX + 2, boxY + 2, boxWidth - 4, boxHeight - 4);
                    
                    // Centered dark blue heading
                    doc.setTextColor(0, 51, 102); // Dark blue
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(18);
                    const textWidth = doc.getTextWidth(heading);
                    const centerX = pageWidth / 2 - textWidth / 2;
                    doc.text(heading, centerX, boxY + 15);
                    
                    // Reset to black for rest of content
                    doc.setTextColor(0, 0, 0);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(12);
                    doc.text(`Date: ${k}`, 14, 46);
                    const text = entry?.text || '(No entry)';
                    const lines = doc.splitTextToSize(text, 180);
                    doc.text(lines, 14, 56);
                });
                const firstDate = keys[0];
                const lastDate = keys[keys.length - 1];
                doc.save(`Reports_${firstDate}_to_${lastDate}.pdf`);
            });

            // Open / close modal
            function openModal() {
                populateSelectors();
                renderCalendar(selectedYear, selectedMonth);
                formEl.style.display = 'none';
                modal.classList.add('show');
                modal.setAttribute('aria-hidden', 'false');
            }

            function closeModal() {
                modal.classList.remove('show');
                modal.setAttribute('aria-hidden', 'true');
            }

            reportBtn.addEventListener('click', (e) => {
                e.preventDefault();
                openModal();
            });
            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });

            monthSelect.addEventListener('change', () => {
                selectedMonth = parseInt(monthSelect.value, 10);
                renderCalendar(selectedYear, selectedMonth);
            });
            yearSelect.addEventListener('change', () => {
                selectedYear = parseInt(yearSelect.value, 10);
                renderCalendar(selectedYear, selectedMonth);
            });
        })();

        // Short Report Modal + Calendar
        (function() {
            const shortBtn = document.querySelector('.short-report-button');
            const modal = document.getElementById('shortReportModal');
            const closeBtn = modal.querySelector('.close-short-modal');
            const monthSelect = document.getElementById('shortMonth');
            const yearSelect = document.getElementById('shortYear');
            const calendarEl = document.getElementById('shortCalendar');
            const formEl = document.getElementById('shortForm');
            const dateLabel = document.getElementById('shortDateLabel');
            const saveBtn = document.getElementById('saveShortReport');
            const clearBtn = document.getElementById('clearShortReport');
            const exportBtn = document.getElementById('exportShortPdf');
            const statusBtns = document.querySelectorAll('.status-btn');

            const MONTHS = ['January','February','March','April','May','June','July','August','September','October','November','December'];
            const DAYS = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
            const now = new Date();
            let selectedYear = now.getFullYear();
            let selectedMonth = now.getMonth();
            let selectedDateKey = null;
            let selectedStatus = null;

            function getShortReports() {
                try {
                    const raw = localStorage.getItem('shortReports');
                    return raw ? JSON.parse(raw) : {};
                } catch (e) {
                    return {};
                }
            }

            function saveShortReports(data) {
                localStorage.setItem('shortReports', JSON.stringify(data));
            }

            function pad(n) { return String(n).padStart(2, '0'); }
            function dateKeyFromParts(y, m, d) {
                return `${y}-${pad(m+1)}-${pad(d)}`;
            }

            function getStatusBadgeClass(status) {
                const map = {
                    'Present': 'badge-present',
                    'Leave': 'badge-leave',
                    'Half Day': 'badge-halfday',
                    'WFH': 'badge-wfh',
                    'Government Holiday': 'badge-holiday'
                };
                return map[status] || 'badge-present';
            }

            function populateSelectors() {
                monthSelect.innerHTML = MONTHS.map((m, i) => `<option value="${i}">${m}</option>`).join('');
                monthSelect.value = String(selectedMonth);
                const rangeStart = selectedYear - 5;
                const rangeEnd = selectedYear + 5;
                yearSelect.innerHTML = Array.from({length: rangeEnd - rangeStart + 1}, (_, i) => {
                    const y = rangeStart + i;
                    return `<option value="${y}">${y}</option>`;
                }).join('');
                yearSelect.value = String(selectedYear);
            }

            function renderCalendar(year, month) {
                const reports = getShortReports();
                calendarEl.innerHTML = '';
                // Day names header
                for (const d of DAYS) {
                    const dn = document.createElement('div');
                    dn.className = 'day-name';
                    dn.textContent = d;
                    calendarEl.appendChild(dn);
                }
                const firstDayIdx = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                // Leading blanks
                for (let i = 0; i < firstDayIdx; i++) {
                    const cell = document.createElement('div');
                    cell.className = 'calendar-cell';
                    calendarEl.appendChild(cell);
                }
                // Days
                for (let day = 1; day <= daysInMonth; day++) {
                    const key = dateKeyFromParts(year, month, day);
                    const cell = document.createElement('div');
                    cell.className = 'calendar-cell' + (reports[key] ? ' has-entry' : '');
                    const btn = document.createElement('button');
                    btn.type = 'button';
                    btn.innerHTML = String(day);
                    if (reports[key]) {
                        const statusBadge = document.createElement('div');
                        statusBadge.className = 'status-badge ' + getStatusBadgeClass(reports[key].status);
                        statusBadge.textContent = reports[key].status;
                        btn.appendChild(statusBadge);
                        if (reports[key].notes) {
                            const notesBadge = document.createElement('div');
                            notesBadge.style.cssText = 'font-size: 8px; padding: 1px 3px; background: rgba(255,255,255,0.2); color: var(--text-white); border-radius: 2px; margin-top: 1px; text-align: center; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;';
                            notesBadge.textContent = reports[key].notes;
                            btn.appendChild(notesBadge);
                        }
                    }
                    btn.dataset.key = key;
                    btn.addEventListener('click', () => selectDate(year, month, day));
                    cell.appendChild(btn);
                    calendarEl.appendChild(cell);
                }
            }

            function selectDate(year, month, day) {
                selectedYear = year;
                selectedMonth = month;
                selectedDateKey = dateKeyFromParts(year, month, day);
                const reports = getShortReports();
                dateLabel.textContent = `Status for ${selectedDateKey}`;
                selectedStatus = reports[selectedDateKey]?.status || null;
                document.getElementById('shortNotes').value = reports[selectedDateKey]?.notes || '';
                
                // Update button states
                statusBtns.forEach(btn => {
                    if (btn.dataset.status === selectedStatus) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });

                formEl.style.display = 'block';
                // Highlight selected cell
                const cells = calendarEl.querySelectorAll('.calendar-cell');
                cells.forEach(c => c.classList.remove('selected'));
                const btn = calendarEl.querySelector(`button[data-key="${selectedDateKey}"]`);
                if (btn && btn.parentElement) btn.parentElement.classList.add('selected');
            }

            // Status button clicks
            statusBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    selectedStatus = btn.dataset.status;
                    statusBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                });
            });

            // Save short report
            saveBtn.addEventListener('click', () => {
                if (!selectedDateKey) return alert('Select a date first');
                if (!selectedStatus) return alert('Select a status first');
                const reports = getShortReports();
                const notesInput = document.getElementById('shortNotes');
                reports[selectedDateKey] = {
                    status: selectedStatus,
                    notes: notesInput.value.trim(),
                    updatedAt: new Date().toISOString()
                };
                saveShortReports(reports);
                renderCalendar(selectedYear, selectedMonth);
                alert('Status saved');
            });

            // Clear short report
            clearBtn.addEventListener('click', () => {
                if (!selectedDateKey) return alert('Select a date first');
                const reports = getShortReports();
                delete reports[selectedDateKey];
                saveShortReports(reports);
                selectedStatus = null;
                document.getElementById('shortNotes').value = '';
                statusBtns.forEach(b => b.classList.remove('active'));
                renderCalendar(selectedYear, selectedMonth);
                alert('Status cleared');
            });

            // Export calendar to PDF
            exportBtn.addEventListener('click', () => {
                const reports = getShortReports();
                const { jsPDF } = window.jspdf || {};
                if (!jsPDF) return alert('PDF library not loaded yet');
                
                const doc = new jsPDF();
                const monthName = MONTHS[selectedMonth];
                const heading = `Attendance Report - ${monthName} ${selectedYear}`;
                
                // Draw page border
                const pageWidth = doc.internal.pageSize.getWidth();
                const pageHeight = doc.internal.pageSize.getHeight();
                doc.setDrawColor(0, 0, 0);
                doc.setLineWidth(0.5);
                doc.rect(5, 5, pageWidth - 10, pageHeight - 10);
                
                // Draw double border box with dark blue heading centered
                const boxX = 14;
                const boxY = 14;
                const boxWidth = pageWidth - 28;
                const boxHeight = 24;
                
                doc.setDrawColor(0, 51, 102);
                doc.setLineWidth(0.8);
                doc.rect(boxX, boxY, boxWidth, boxHeight);
                doc.rect(boxX + 2, boxY + 2, boxWidth - 4, boxHeight - 4);
                
                doc.setTextColor(0, 51, 102);
                doc.setFont('helvetica', 'bold');
                doc.setFontSize(18);
                const textWidth = doc.getTextWidth(heading);
                const centerX = pageWidth / 2 - textWidth / 2;
                doc.text(heading, centerX, boxY + 15);
                
                // Calendar grid
                doc.setTextColor(0, 0, 0);
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(10);
                
                const startY = 50;
                const cellSize = 25;
                const gridX = 14;
                
                // Day headers
                DAYS.forEach((d, i) => {
                    doc.setFont('helvetica', 'bold');
                    doc.text(d, gridX + i * cellSize + 3, startY);
                });
                
                // Calendar days
                const firstDayIdx = new Date(selectedYear, selectedMonth, 1).getDay();
                const daysInMonth = new Date(selectedYear, selectedMonth + 1, 0).getDate();
                
                let row = 0;
                let col = firstDayIdx;
                
                doc.setFont('helvetica', 'normal');
                for (let day = 1; day <= daysInMonth; day++) {
                    const key = dateKeyFromParts(selectedYear, selectedMonth, day);
                    const x = gridX + col * cellSize;
                    const y = startY + 8 + row * cellSize;
                    
                    // Draw cell border
                    doc.setDrawColor(200, 200, 200);
                    doc.rect(x, y - 6, cellSize - 2, cellSize - 2);
                    
                    // Day number
                    doc.setFontSize(10);
                    doc.text(String(day), x + 3, y);
                    
                    // Status
                    if (reports[key]) {
                        doc.setFontSize(7);
                        const statusText = reports[key].status;
                        doc.text(statusText, x + 3, y + 5);
                        if (reports[key].notes) {
                            doc.setFontSize(6);
                            doc.text(reports[key].notes, x + 3, y + 9);
                        }
                    }
                    
                    col++;
                    if (col > 6) {
                        col = 0;
                        row++;
                    }
                }
                
                // Summary
                const summaryY = startY + 8 + (row + 2) * cellSize;
                doc.setFont('helvetica', 'bold');
                doc.setFontSize(12);
                doc.text('Summary:', 14, summaryY);
                
                doc.setFont('helvetica', 'normal');
                doc.setFontSize(10);
                const statusCounts = {};
                Object.values(reports).forEach(r => {
                    if (r.status) {
                        statusCounts[r.status] = (statusCounts[r.status] || 0) + 1;
                    }
                });
                
                let offset = 0;
                for (const [status, count] of Object.entries(statusCounts)) {
                    doc.text(`${status}: ${count} days`, 14, summaryY + 8 + offset);
                    offset += 6;
                }
                
                doc.save(`Attendance_${monthName}_${selectedYear}.pdf`);
            });

            function openModal() {
                populateSelectors();
                renderCalendar(selectedYear, selectedMonth);
                formEl.style.display = 'none';
                modal.classList.add('show');
                modal.setAttribute('aria-hidden', 'false');
            }

            function closeModal() {
                modal.classList.remove('show');
                modal.setAttribute('aria-hidden', 'true');
            }

            shortBtn.addEventListener('click', (e) => {
                e.preventDefault();
                openModal();
            });
            closeBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });

            monthSelect.addEventListener('change', () => {
                selectedMonth = parseInt(monthSelect.value, 10);
                renderCalendar(selectedYear, selectedMonth);
            });
            yearSelect.addEventListener('change', () => {
                selectedYear = parseInt(yearSelect.value, 10);
                renderCalendar(selectedYear, selectedMonth);
            });
        })();
    </script>
</body>
</html>